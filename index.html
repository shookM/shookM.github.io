<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>shook - 个人生活感悟</title><meta name="author" content="Shook"><meta name="copyright" content="Shook"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="个人生活感悟">
<meta property="og:type" content="website">
<meta property="og:title" content="shook">
<meta property="og:url" content="https://shookm.com/index.html">
<meta property="og:site_name" content="shook">
<meta property="og:description" content="个人生活感悟">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://shookm.com/img/pic/6.jpg">
<meta property="article:author" content="Shook">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://shookm.com/img/pic/6.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://shookm.com/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'shook',
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2024-03-11 13:57:15'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if (GLOBAL_CONFIG_SITE.isHome && /iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/static-butterfly/dist/css/index.min.css"><meta name="generator" content="Hexo 5.4.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/pic/6.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">40</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">52</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">37</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于me</span></a></div></div></div></div><div class="page" id="body-wrap"><header class="full_page" id="page-header" style="background-image: url('/img/bg/11.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">shook</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于me</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="site-info"><h1 id="site-title">shook</h1><div id="site-subtitle"><span id="subtitle"></span></div><div id="site_social_icons"><a class="social-icon" href="https://github.com/shookm" target="_blank" title="Github"><i class="fab fa-github"></i></a></div></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2022/02/22/%E8%AF%B4%E4%B8%80%E8%AF%B4/" title="说一说">     <img class="post_bg" src="/img/md/s-sys.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="说一说"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/02/22/%E8%AF%B4%E4%B8%80%E8%AF%B4/" title="说一说">说一说</a><div class="article-meta-wrap"><span class="article-meta"><i class="fas fa-thumbtack sticky"></i><span class="sticky">置顶</span><span class="article-meta__separator">|</span></span><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-02-22T06:00:00.000Z" title="发表于 2022-02-22 14:00:00">2022-02-22</time></span></div><div class="content">
本博客为个人平时遇到技术小问题记录，与博客园内容同步更新。

</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2022/02/17/GitLab%E7%AC%94%E8%AE%B0%20-%20%E5%8D%87%E7%BA%A7gitlab%20%E7%89%88%E6%9C%AC%E5%90%8E%E9%A1%B9%E7%9B%AE%E7%9A%84webhook%E9%A1%B5%E9%9D%A2%E6%98%BE%E7%A4%BA500%E9%97%AE%E9%A2%98/" title="GitLab笔记 - 升级gitlab 版本后项目的webhook页面显示500问题">     <img class="post_bg" src="/img/md/s-DEVOPS.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="GitLab笔记 - 升级gitlab 版本后项目的webhook页面显示500问题"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/02/17/GitLab%E7%AC%94%E8%AE%B0%20-%20%E5%8D%87%E7%BA%A7gitlab%20%E7%89%88%E6%9C%AC%E5%90%8E%E9%A1%B9%E7%9B%AE%E7%9A%84webhook%E9%A1%B5%E9%9D%A2%E6%98%BE%E7%A4%BA500%E9%97%AE%E9%A2%98/" title="GitLab笔记 - 升级gitlab 版本后项目的webhook页面显示500问题">GitLab笔记 - 升级gitlab 版本后项目的webhook页面显示500问题</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-02-17T06:47:00.000Z" title="发表于 2022-02-17 14:47:00">2022-02-17</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/DEVOPS/">DEVOPS</a><i class="fas fa-angle-right"></i><a class="article-meta__categories" href="/categories/DEVOPS/GitLab/">GitLab</a></span></div><div class="content">今天升级gitlab 13.3.1升级到14.0.0版本后部分部署过webhook项目的webhook页面显示500，其他没有部署过webhook的项目是正常可以打开的

原因是因为旧的 webhook 与新的 webhook 存在兼容性问题

12345678910111213141516171819202122232425262728293031323334353637383940414243444546==&gt; /var/log/gitlab/gitlab-rails/production.log &lt;==ActionView::Template::Error ():    1: %li    2:   .row    3:     .col-md-8.col-lg-7    4:       %strong.light-header= hook.url    5:       %div    6:         - hook.class.triggers.each_value do |trigger|    7:           - if hook.public_ ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2022/02/17/gitbook%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2/" title="gitbook安装部署">     <img class="post_bg" src="/img/md/s-%E4%B8%AD%E9%97%B4%E4%BB%B6.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="gitbook安装部署"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/02/17/gitbook%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2/" title="gitbook安装部署">gitbook安装部署</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-02-17T06:47:00.000Z" title="发表于 2022-02-17 14:47:00">2022-02-17</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E4%B8%AD%E9%97%B4%E4%BB%B6/">中间件</a><i class="fas fa-angle-right"></i><a class="article-meta__categories" href="/categories/%E4%B8%AD%E9%97%B4%E4%BB%B6/gitbook/">gitbook</a></span></div><div class="content">1、gitbook 脚手架安装我这里有cnpm就用cnpm了，没有的还是用npm
1cnpm install -g gitbook-cli


2、初始化 gitbook新建一个目录
1gitbook init

在初始化的时候遇到以下问题
123TypeError: cb.apply is not a function    at /usr/local/lib/node_modules/gitbook-cli/node_modules/npm/node_modules/graceful-fs/polyfills.js:287:18    at FSReqCallback.oncomplete (fs.js:184:5)

查找得知需要修改polyfills.js文件注释掉以下代码
123fs.stat = statFix(fs.stat)fs.fstat = statFix(fs.fstat)fs.lstat = statFix(fs.lstat)


注释掉再执行gitbook的初始化后又出现了其它问题
1TypeError [ERR_INVALID_ARG_TYPE]: The  ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2021/10/16/Rancher%202.5%20%E5%8D%95%E6%9C%BA%E7%AE%80%E5%8D%95%E9%83%A8%E7%BD%B2/" title="Rancher 2.5 单机简单部署">     <img class="post_bg" src="/img/md/s-k8s.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Rancher 2.5 单机简单部署"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/10/16/Rancher%202.5%20%E5%8D%95%E6%9C%BA%E7%AE%80%E5%8D%95%E9%83%A8%E7%BD%B2/" title="Rancher 2.5 单机简单部署">Rancher 2.5 单机简单部署</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-10-16T02:53:00.000Z" title="发表于 2021-10-16 10:53:00">2021-10-16</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/K8S/">K8S</a><i class="fas fa-angle-right"></i><a class="article-meta__categories" href="/categories/K8S/Rancher/">Rancher</a></span></div><div class="content">k8s之路-Rancher还是先碎碎念一下，近期需要在内部环境搭建一套k8s,暂时记录一下，后续需要的话再整理一个体系
官方文档：http://docs.rancher.cn/docs/rancher2.5/overview/_index  有问题，找文档
一、Rancher、Docker、K8S等介绍(可略)1.1 什么是 Rancher？Rancher 是为使用容器的公司打造的容器管理平台。Rancher 简化了使用 Kubernetes 的流程，开发者可以随处运行 Kubernetes（Run Kubernetes Everywhere），满足 IT 需求规范，赋能 DevOps 团队。Rancher 1.x 最初是为了支持多种容器编排引擎而构建的，其中包括 Rancher 自己的容器编排引擎 Cattle。但随着 Kubernetes 在市场上的兴起，Rancher 2.x 已经完全转向了 Kubernetes。Rancher 2.x 可以部署和管理在任何地方运行的 Kubernetes 集群。Rancher 可以创建来自 Kubernetes 托管服务提供商的集群，自动创建节 ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2021/10/13/curl%20%E5%BF%BD%E7%95%A5https%E7%9A%84ssl%E7%9A%84%E8%AF%81%E4%B9%A6%E9%AA%8C%E8%AF%81/" title="curl 忽略https的ssl的证书验证">     <img class="post_bg" src="/img/md/s-%E5%85%B6%E4%BB%96.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="curl 忽略https的ssl的证书验证"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/10/13/curl%20%E5%BF%BD%E7%95%A5https%E7%9A%84ssl%E7%9A%84%E8%AF%81%E4%B9%A6%E9%AA%8C%E8%AF%81/" title="curl 忽略https的ssl的证书验证">curl 忽略https的ssl的证书验证</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-10-13T06:15:00.000Z" title="发表于 2021-10-13 14:15:00">2021-10-13</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/ssl%E8%AF%81%E4%B9%A6/">ssl证书</a></span></div><div class="content">今天使用postman生成的curl post请求出现了需要ssl证书的验证

那么我们看一下curl的用法

加一个 -k 就可以忽略掉证书了
</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2021/09/28/Skywalking%E8%AE%B0%E5%BD%95-%E6%97%A5%E5%BF%97%E9%9B%86%E6%88%90%E7%B3%BB%E7%BB%9F%E4%BB%A5%E5%8F%8A%E5%87%BA%E7%8E%B0%E7%9A%84%E9%97%AE%E9%A2%98/" title="Skywalking记录-日志集成系统以及出现的问题">     <img class="post_bg" src="/img/md/s-%E4%B8%AD%E9%97%B4%E4%BB%B6.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Skywalking记录-日志集成系统以及出现的问题"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/09/28/Skywalking%E8%AE%B0%E5%BD%95-%E6%97%A5%E5%BF%97%E9%9B%86%E6%88%90%E7%B3%BB%E7%BB%9F%E4%BB%A5%E5%8F%8A%E5%87%BA%E7%8E%B0%E7%9A%84%E9%97%AE%E9%A2%98/" title="Skywalking记录-日志集成系统以及出现的问题">Skywalking记录-日志集成系统以及出现的问题</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-09-28T07:59:00.000Z" title="发表于 2021-09-28 15:59:00">2021-09-28</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E4%B8%AD%E9%97%B4%E4%BB%B6/">中间件</a><i class="fas fa-angle-right"></i><a class="article-meta__categories" href="/categories/%E4%B8%AD%E9%97%B4%E4%BB%B6/SkyWalking/">SkyWalking</a></span></div><div class="content">最近因为需要重新启用Skywalking，过程和问题依旧先在这里记录下来
Skywalking在8.4.0版本以上新增了日志集成系统,因为我这个应用集成了log4j2，所以以log4j2举例，不过也会有log4j以及logback的例子
版本：

  skywalking:8.6.0
  ES:7
  log4j2:2.13.0

关于skywalking的安装部署可以看以前的文章，这里就不再赘述了
skywalking-log4j2官方文档：
https://skywalking.apache.org/docs/main/v8.6.0/en/setup/service-agent/java-agent/application-toolkit-log4j-2.x/
skywalking-logback使用的官方文档：
https://skywalking.apache.org/docs/main/v8.6.0/en/setup/service-agent/java-agent/application-toolkit-logback-1.x/
skywalking-log4j使用的官方文 ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2021/09/28/qqzonetx%E4%BA%91%E7%99%BB%E5%BD%95%E6%89%80%E7%94%A8g_tkx-csrfcode%E8%8E%B7%E5%8F%96/" title="qqzonetx云登录所用g_tkx-csrfcode获取">     <img class="post_bg" src="/img/md/s-%E5%85%B6%E4%BB%96.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="qqzonetx云登录所用g_tkx-csrfcode获取"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/09/28/qqzonetx%E4%BA%91%E7%99%BB%E5%BD%95%E6%89%80%E7%94%A8g_tkx-csrfcode%E8%8E%B7%E5%8F%96/" title="qqzonetx云登录所用g_tkx-csrfcode获取">qqzonetx云登录所用g_tkx-csrfcode获取</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-09-28T07:59:00.000Z" title="发表于 2021-09-28 15:59:00">2021-09-28</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E4%BA%91/">云</a><i class="fas fa-angle-right"></i><a class="article-meta__categories" href="/categories/%E4%BA%91/%E8%85%BE%E8%AE%AF%E4%BA%91/">腾讯云</a></span></div><div class="content">今天需要获取到txy的某个api接口，但是txy需要登录才能使用，需要g_tk/x-csrfcode，
这里简单介绍一下g_tk/x-csrfcode：
由于CSRF的本质在于攻击者欺骗用户去访问自己设置的地址，所以如果要求在访问敏感数据请求时，要求用户浏览器提供不保存在cookie中，并且攻击者无法伪造的数据作为校验，那么攻击者就无法再运行CSRF攻击。这种数据通常是窗体中的一个数据项。服务器将其生成并附加在窗体中，其内容是一个伪随机数。当客户端通过窗体提交请求时，这个伪随机数也一并提交上去以供校验。正常的访问时，客户端浏览器能够正确得到并传回这个伪随机数，而通过CSRF传来的欺骗性攻击中，攻击者无从事先得知这个伪随机数的值，服务端就会因为校验token的值为空或者错误，拒绝这个可疑请求。
在我们通过登录后会返回一个skey

而g_tk/x-csrfcode的值是通过skey的计算出来的
g_tk/x-csrfcode的算法:
java:
1234567891011public class Security &#123;    public static String GetG_T ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2021/07/23/%E8%AE%B0docker%E4%B8%8Bgitlab%E5%A4%87%E4%BB%BD%E3%80%81%E8%BF%81%E7%A7%BB%E4%BB%A5%E5%8F%8A%E5%87%BA%E7%8E%B0%E7%9A%84%E9%97%AE%E9%A2%98/" title="记docker下gitlab备份、迁移以及出现的问题">     <img class="post_bg" src="/img/md/s-DEVOPS.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="记docker下gitlab备份、迁移以及出现的问题"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/07/23/%E8%AE%B0docker%E4%B8%8Bgitlab%E5%A4%87%E4%BB%BD%E3%80%81%E8%BF%81%E7%A7%BB%E4%BB%A5%E5%8F%8A%E5%87%BA%E7%8E%B0%E7%9A%84%E9%97%AE%E9%A2%98/" title="记docker下gitlab备份、迁移以及出现的问题">记docker下gitlab备份、迁移以及出现的问题</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-07-23T06:32:00.000Z" title="发表于 2021-07-23 14:32:00">2021-07-23</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/DEVOPS/">DEVOPS</a><i class="fas fa-angle-right"></i><a class="article-meta__categories" href="/categories/DEVOPS/GitLab/">GitLab</a></span></div><div class="content">今天需要把一台服务器的gitlab迁移到另一台机器上，so在此记录一下
一、新机器安装gitlab及准备工作我们在新机器安装gitlab的时候需要注意，新的gitlab要和旧的gitlab的版本匹配才能进行迁移 我们在gitlab的管理面板中查看一下旧的gitlab版本

也可以直接进入容器中进行查看
cat /opt/gitlab/embedded/service/gitlab-rails/VERSION

我这里旧的版本是13.12.2，所以我新机器拉取的镜像也需要时13.12.2
docker pull gitlab/gitlab-ce:13.12.2-ce.0

然后直接运行
12345678-p 80:80 -p 9022:22 \-v /usr/local/gitlab/etc:/etc/gitlab \-v /usr/local/gitlab/log:/var/log/gitlab  \-v /usr/local/gitlab/opt:/var/opt/gitlab  \--restart always \--privileged=true \--name gitlab  ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2021/07/07/Linux%E4%B8%8B%E5%AE%89%E8%A3%85Chrome%E4%BB%A5%E5%8F%8AChromeDriver/" title="Linux下安装Chrome以及ChromeDriver">     <img class="post_bg" src="/img/md/s-%E8%AF%AD%E8%A8%80.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Linux下安装Chrome以及ChromeDriver"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/07/07/Linux%E4%B8%8B%E5%AE%89%E8%A3%85Chrome%E4%BB%A5%E5%8F%8AChromeDriver/" title="Linux下安装Chrome以及ChromeDriver">Linux下安装Chrome以及ChromeDriver</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-07-07T03:21:00.000Z" title="发表于 2021-07-07 11:21:00">2021-07-07</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Linux/">Linux</a></span></div><div class="content">今天需要在Linux上放一个selenium的小程序，所以安装一下Chrome以及ChromeDriver
一、Linux安装Chrome我这里环境是Centos7.x，采取了最快的安装最新 Chrome 版本的最简单方法
1curl https://intoli.com/install-google-chrome.sh | bash


有其他版本需求可以参考:https://intoli.com/blog/installing-google-chrome-on-centos/
安装完成，验证一下是否成功，以及Chrome的版本，后续会用到
google-chrome --version

二、Linux安装ChromeDriverchrome官方：http://chromedriver.storage.googleapis.com/index.html
淘宝源：https://npm.taobao.org/mirrors/chromedriver
我们下载对应版本，从上面我们可知版本为91.0.4472.114
那我们从中找到进行下载


wget http://chromedri ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2021/03/15/%E8%8B%B9%E6%9E%9C%E5%BC%80%E5%8F%91%E8%80%85%E5%85%AC%E5%8F%B8%E8%B4%A6%E5%8F%B7%E7%94%B3%E8%AF%B7%E5%85%A8%E6%B5%81%E7%A8%8B%E4%BB%A5%E5%8F%8A%E5%87%BA%E7%8E%B0%E7%9A%84%E9%97%AE%E9%A2%98%EF%BC%882021%E6%9B%B4%E6%96%B0%EF%BC%89/" title="苹果开发者公司账号申请全流程以及出现的问题（2021更新）">     <img class="post_bg" src="/img/md/s-%E5%85%B6%E4%BB%96.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="苹果开发者公司账号申请全流程以及出现的问题（2021更新）"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/03/15/%E8%8B%B9%E6%9E%9C%E5%BC%80%E5%8F%91%E8%80%85%E5%85%AC%E5%8F%B8%E8%B4%A6%E5%8F%B7%E7%94%B3%E8%AF%B7%E5%85%A8%E6%B5%81%E7%A8%8B%E4%BB%A5%E5%8F%8A%E5%87%BA%E7%8E%B0%E7%9A%84%E9%97%AE%E9%A2%98%EF%BC%882021%E6%9B%B4%E6%96%B0%EF%BC%89/" title="苹果开发者公司账号申请全流程以及出现的问题（2021更新）">苹果开发者公司账号申请全流程以及出现的问题（2021更新）</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-03-15T06:00:00.000Z" title="发表于 2021-03-15 14:00:00">2021-03-15</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E5%BC%80%E5%8F%91%E8%80%85%E8%B4%A6%E5%8F%B7/">开发者账号</a></span></div><div class="content">最近有个ios的项目需要上架到App Store，因为是新项目所以申请流程需要重新进行，我这里选择的是公司账号，遇到了太多问题（坑坑坑），应该算是比较全面得了，在此记录一下
一、apple开发者账号区别及介绍



个人账号（Individual）
公司账号（Company）
企业账号（Enterprise）
教育账号(University)



费用
99美元一年
99美元一年
299美元一年
0美元


App Store上架
是
是
否
否


协作人数
1人
多人
多人
多人


邓白氏编码（DUNS Number）申请
不需要
需要
需要
不需要


最大UDID支持数
100
100
不限制
不限制


备注1
个人账号可升级为公司账号
多个开发者进行协作开发
可以in-house 发布
教育机构或学院内部使用


备注2






邓氏编码简介：邓氏编码（D-U-N-S Number）是一种实时动态的企业身份标识。它源自于一个独一无二的9位数字全球编码系统DUNS，相当于企业的身份识别码 （就像是个人的身份证），被广泛应用于企业识别、商业信息的组织及整理。可以帮助识别 ...</div></div></div><nav id="pagination"><div class="pagination"><span class="page-number current">1</span><a class="page-number" href="/page/2/#content-inner">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/#content-inner">4</a><a class="extend next" rel="next" href="/page/2/#content-inner"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/pic/6.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Shook</div><div class="author-info__description">个人生活感悟</div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">40</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">标签</div><div class="length-num">52</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">分类</div><div class="length-num">37</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/shookM"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/shookm" target="_blank" title="Github"><i class="fab fa-github"></i></a></div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2022/02/22/%E8%AF%B4%E4%B8%80%E8%AF%B4/" title="说一说"><img src="/img/md/s-sys.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="说一说"/></a><div class="content"><a class="title" href="/2022/02/22/%E8%AF%B4%E4%B8%80%E8%AF%B4/" title="说一说">说一说</a><time datetime="2022-02-22T06:00:00.000Z" title="发表于 2022-02-22 14:00:00">2022-02-22</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/02/17/GitLab%E7%AC%94%E8%AE%B0%20-%20%E5%8D%87%E7%BA%A7gitlab%20%E7%89%88%E6%9C%AC%E5%90%8E%E9%A1%B9%E7%9B%AE%E7%9A%84webhook%E9%A1%B5%E9%9D%A2%E6%98%BE%E7%A4%BA500%E9%97%AE%E9%A2%98/" title="GitLab笔记 - 升级gitlab 版本后项目的webhook页面显示500问题"><img src="/img/md/s-DEVOPS.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="GitLab笔记 - 升级gitlab 版本后项目的webhook页面显示500问题"/></a><div class="content"><a class="title" href="/2022/02/17/GitLab%E7%AC%94%E8%AE%B0%20-%20%E5%8D%87%E7%BA%A7gitlab%20%E7%89%88%E6%9C%AC%E5%90%8E%E9%A1%B9%E7%9B%AE%E7%9A%84webhook%E9%A1%B5%E9%9D%A2%E6%98%BE%E7%A4%BA500%E9%97%AE%E9%A2%98/" title="GitLab笔记 - 升级gitlab 版本后项目的webhook页面显示500问题">GitLab笔记 - 升级gitlab 版本后项目的webhook页面显示500问题</a><time datetime="2022-02-17T06:47:00.000Z" title="发表于 2022-02-17 14:47:00">2022-02-17</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/02/17/gitbook%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2/" title="gitbook安装部署"><img src="/img/md/s-%E4%B8%AD%E9%97%B4%E4%BB%B6.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="gitbook安装部署"/></a><div class="content"><a class="title" href="/2022/02/17/gitbook%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2/" title="gitbook安装部署">gitbook安装部署</a><time datetime="2022-02-17T06:47:00.000Z" title="发表于 2022-02-17 14:47:00">2022-02-17</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/10/16/Rancher%202.5%20%E5%8D%95%E6%9C%BA%E7%AE%80%E5%8D%95%E9%83%A8%E7%BD%B2/" title="Rancher 2.5 单机简单部署"><img src="/img/md/s-k8s.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Rancher 2.5 单机简单部署"/></a><div class="content"><a class="title" href="/2021/10/16/Rancher%202.5%20%E5%8D%95%E6%9C%BA%E7%AE%80%E5%8D%95%E9%83%A8%E7%BD%B2/" title="Rancher 2.5 单机简单部署">Rancher 2.5 单机简单部署</a><time datetime="2021-10-16T02:53:00.000Z" title="发表于 2021-10-16 10:53:00">2021-10-16</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/10/13/curl%20%E5%BF%BD%E7%95%A5https%E7%9A%84ssl%E7%9A%84%E8%AF%81%E4%B9%A6%E9%AA%8C%E8%AF%81/" title="curl 忽略https的ssl的证书验证"><img src="/img/md/s-%E5%85%B6%E4%BB%96.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="curl 忽略https的ssl的证书验证"/></a><div class="content"><a class="title" href="/2021/10/13/curl%20%E5%BF%BD%E7%95%A5https%E7%9A%84ssl%E7%9A%84%E8%AF%81%E4%B9%A6%E9%AA%8C%E8%AF%81/" title="curl 忽略https的ssl的证书验证">curl 忽略https的ssl的证书验证</a><time datetime="2021-10-13T06:15:00.000Z" title="发表于 2021-10-13 14:15:00">2021-10-13</time></div></div></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>分类</span>
            <a class="card-more-btn" href="/categories/" title="查看更多">
    <i class="fas fa-angle-right"></i></a>
            </div>
            <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/APM/"><span class="card-category-list-name">APM</span><span class="card-category-list-count">1</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/APM/SkyWalking/"><span class="card-category-list-name">SkyWalking</span><span class="card-category-list-count">1</span></a></li></ul></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Code/"><span class="card-category-list-name">Code</span><span class="card-category-list-count">1</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Code/NetCore/"><span class="card-category-list-name">.NetCore</span><span class="card-category-list-count">1</span></a></li></ul></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/DEVOPS/"><span class="card-category-list-name">DEVOPS</span><span class="card-category-list-count">9</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/DEVOPS/GitLab/"><span class="card-category-list-name">GitLab</span><span class="card-category-list-count">2</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/DEVOPS/Jenkins/"><span class="card-category-list-name">Jenkins</span><span class="card-category-list-count">7</span></a></li></ul></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Docker/"><span class="card-category-list-name">Docker</span><span class="card-category-list-count">2</span></a></li>
            </ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>标签</span></div><div class="card-tag-cloud"><a href="/tags/NETCore/" style="font-size: 1.26em; color: #999fa8">.NETCore</a> <a href="/tags/NetCore/" style="font-size: 1.1em; color: #999">.NetCore</a> <a href="/tags/APM/" style="font-size: 1.26em; color: #999fa8">APM</a> <a href="/tags/Ambari/" style="font-size: 1.1em; color: #999">Ambari</a> <a href="/tags/CentOS/" style="font-size: 1.1em; color: #999">CentOS</a> <a href="/tags/ChromeDriver/" style="font-size: 1.1em; color: #999">ChromeDriver</a> <a href="/tags/DEVOPS/" style="font-size: 1.42em; color: #99a6b7">DEVOPS</a> <a href="/tags/Docker/" style="font-size: 1.34em; color: #99a3b0">Docker</a> <a href="/tags/DockerFile/" style="font-size: 1.1em; color: #999">DockerFile</a> <a href="/tags/FFmpeg/" style="font-size: 1.1em; color: #999">FFmpeg</a> <a href="/tags/GRAYLOG/" style="font-size: 1.1em; color: #999">GRAYLOG</a> <a href="/tags/Git/" style="font-size: 1.26em; color: #999fa8">Git</a> <a href="/tags/GitLab/" style="font-size: 1.1em; color: #999">GitLab</a> <a href="/tags/Gitlab/" style="font-size: 1.1em; color: #999">Gitlab</a> <a href="/tags/IIS10/" style="font-size: 1.1em; color: #999">IIS10</a> <a href="/tags/JAVA/" style="font-size: 1.1em; color: #999">JAVA</a> <a href="/tags/JBoss/" style="font-size: 1.1em; color: #999">JBoss</a> <a href="/tags/Java/" style="font-size: 1.1em; color: #999">Java</a> <a href="/tags/Jenkins/" style="font-size: 1.5em; color: #99a9bf">Jenkins</a> <a href="/tags/Jexus/" style="font-size: 1.1em; color: #999">Jexus</a> <a href="/tags/Kubernetes/" style="font-size: 1.1em; color: #999">Kubernetes</a> <a href="/tags/Linux/" style="font-size: 1.5em; color: #99a9bf">Linux</a> <a href="/tags/MYSQL/" style="font-size: 1.1em; color: #999">MYSQL</a> <a href="/tags/Maven/" style="font-size: 1.1em; color: #999">Maven</a> <a href="/tags/MongoDB/" style="font-size: 1.1em; color: #999">MongoDB</a> <a href="/tags/NETCore5-0/" style="font-size: 1.1em; color: #999">NETCore5.0</a> <a href="/tags/Nginx/" style="font-size: 1.1em; color: #999">Nginx</a> <a href="/tags/Redis/" style="font-size: 1.1em; color: #999">Redis</a> <a href="/tags/SQLServer/" style="font-size: 1.1em; color: #999">SQLServer</a> <a href="/tags/Skywalking/" style="font-size: 1.18em; color: #999ca1">Skywalking</a> <a href="/tags/Supervisor/" style="font-size: 1.1em; color: #999">Supervisor</a> <a href="/tags/Windows/" style="font-size: 1.18em; color: #999ca1">Windows</a> <a href="/tags/apple/" style="font-size: 1.1em; color: #999">apple</a> <a href="/tags/confluent/" style="font-size: 1.1em; color: #999">confluent</a> <a href="/tags/curl/" style="font-size: 1.1em; color: #999">curl</a> <a href="/tags/frp/" style="font-size: 1.1em; color: #999">frp</a> <a href="/tags/gitbook/" style="font-size: 1.1em; color: #999">gitbook</a> <a href="/tags/hack/" style="font-size: 1.1em; color: #999">hack</a> <a href="/tags/k8s/" style="font-size: 1.1em; color: #999">k8s</a> <a href="/tags/kafka/" style="font-size: 1.18em; color: #999ca1">kafka</a></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>归档</span><a class="card-more-btn" href="/archives/" title="查看更多">
    <i class="fas fa-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/02/"><span class="card-archive-list-date">二月 2022</span><span class="card-archive-list-count">3</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/10/"><span class="card-archive-list-date">十月 2021</span><span class="card-archive-list-count">2</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/09/"><span class="card-archive-list-date">九月 2021</span><span class="card-archive-list-count">2</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/07/"><span class="card-archive-list-date">七月 2021</span><span class="card-archive-list-count">2</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/03/"><span class="card-archive-list-date">三月 2021</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/02/"><span class="card-archive-list-date">二月 2021</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/01/"><span class="card-archive-list-date">一月 2021</span><span class="card-archive-list-count">3</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2020/12/"><span class="card-archive-list-date">十二月 2020</span><span class="card-archive-list-count">2</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>网站资讯</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">文章数目 :</div><div class="item-count">40</div></div><div class="webinfo-item"><div class="item-name">本站访客数 :</div><div class="item-count" id="busuanzi_value_site_uv"></div></div><div class="webinfo-item"><div class="item-name">本站总访问量 :</div><div class="item-count" id="busuanzi_value_site_pv"></div></div><div class="webinfo-item"><div class="item-name">最后更新时间 :</div><div class="item-count" id="last-push-date" data-lastPushDate="2024-03-11T05:57:15.448Z"></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2018 - 2024 By Shook</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">By Node 14.17 on Kubernetes 1.25.2 </br> <a target="_blank" rel="noopener" href="https://beian.miit.gov.cn/"><span>吉ICP备18005491号-1</span></a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><div class="js-pjax"><script>function subtitleType () {
  getScript('https://sdk.jinrishici.com/v2/browser/jinrishici.js').then(() => {
    jinrishici.load(function (result) {
      if (true) {
        var sub = "".length == 0 ? new Array() : "".split(',')
        var content = result.data.content
        var both = sub.unshift(content)
        var typed = new Typed('#subtitle', {
          strings: sub,
          startDelay: 300,
          typeSpeed: 150,
          loop: true,
          backSpeed: 50,
        })
      } else {
        document.getElementById('subtitle').innerHTML = result.data.content
      }
    })
  })
}

if (true) {
  if (typeof Typed === 'function') {
    subtitleType()
  } else {
    getScript('https://cdn.jsdelivr.net/npm/typed.js/lib/typed.min.js').then(subtitleType)
  }
} else {
  subtitleType()
}
</script></div><canvas class="fireworks" mobile="false"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/fireworks.min.js"></script><script defer="defer" id="fluttering_ribbon" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-fluttering-ribbon.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = false;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>